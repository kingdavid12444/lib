local Players = game:GetService("Players")
local player = Players.LocalPlayer
local mouse = player:GetMouse()

local UILib = {}
local gui = Instance.new("ScreenGui")
gui.Name = "ModernUILib"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Dock Bar
local Dock = Instance.new("Frame")
Dock.Name = "TopDock"
Dock.Size = UDim2.new(1, 0, 0, 40)
Dock.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Dock.BorderSizePixel = 0
Dock.Parent = gui

local dockCorner = Instance.new("UICorner")
dockCorner.CornerRadius = UDim.new(0, 6)
dockCorner.Parent = Dock

local tabLayout = Instance.new("UIListLayout")
tabLayout.FillDirection = Enum.FillDirection.Horizontal
tabLayout.Padding = UDim.new(0, 5)
tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
tabLayout.VerticalAlignment = Enum.VerticalAlignment.Center
tabLayout.Parent = Dock

-- CreateTab function
function UILib:CreateTab(tabName)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 100, 1, 0)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.Text = tabName
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.BorderSizePixel = 0
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.Parent = Dock

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 4)
    corner.Parent = btn

    local tabFrame = Instance.new("Frame")
    tabFrame.Name = tabName .. "_Frame"
    tabFrame.Size = UDim2.new(0, 250, 0, 300)
    tabFrame.Position = UDim2.new(0, 10, 0, 50)
    tabFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    tabFrame.Visible = false
    tabFrame.Parent = gui

    local tabCorner = Instance.new("UICorner")
    tabCorner.CornerRadius = UDim.new(0, 6)
    tabCorner.Parent = tabFrame

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 30)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = tabName
    title.TextColor3 = Color3.new(1, 1, 1)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 18
    title.Parent = tabFrame

    local contentLayout = Instance.new("UIListLayout")
    contentLayout.Padding = UDim.new(0, 8)
    contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    contentLayout.Parent = tabFrame
    contentLayout.VerticalAlignment = Enum.VerticalAlignment.Top
    contentLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left

    local function hideAllTabs()
        for _, v in pairs(gui:GetChildren()) do
            if v:IsA("Frame") and v.Name:match("_Frame$") then
                v.Visible = false
            end
        end
    end

    btn.MouseButton1Click:Connect(function()
        hideAllTabs()
        tabFrame.Visible = true
    end)

    local api = {}

    function api:AddButton(text, callback)
        local b = Instance.new("TextButton")
        b.Size = UDim2.new(1, -20, 0, 30)
        b.Text = text
        b.TextColor3 = Color3.new(1, 1, 1)
        b.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        b.Font = Enum.Font.Gotham
        b.TextSize = 14
        b.BorderSizePixel = 0
        b.Parent = tabFrame

        local bcorner = Instance.new("UICorner", b)
        bcorner.CornerRadius = UDim.new(0, 4)

        b.MouseButton1Click:Connect(callback)
    end

    function api:AddLabel(text)
        local lbl = Instance.new("TextLabel")
        lbl.Size = UDim2.new(1, -20, 0, 30)
        lbl.Text = text
        lbl.TextColor3 = Color3.new(1, 1, 1)
        lbl.BackgroundTransparency = 1
        lbl.Font = Enum.Font.Gotham
        lbl.TextSize = 14
        lbl.BorderSizePixel = 0
        lbl.Parent = tabFrame
    end

    return api
end

return UILib
